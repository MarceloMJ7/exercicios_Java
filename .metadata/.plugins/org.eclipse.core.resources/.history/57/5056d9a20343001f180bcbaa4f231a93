package desafio_2;

import javax.swing.JOptionPane;

/*
 Você deverá desenvolver um algoritmo que solicite a idade, o gênero e o salário de 
um grupo de pessoas. Para encerrar o programa, o usuário deve digitar "Finalizar". 
Certifique-se de validar para que o usuário digite exatamente "Finalizar". Ao término 
da execução do programa, será apresentado ao usuário as seguintes informações:
● A média de idade geral;
● A média de idade de pessoas do gênero feminino;
● A média de idade de pessoas do gênero masculino;
● A média salarial geral;
● A média salarial do gênero feminino;
● A média salarial do gênero masculino.
● O maior salário;
● O menor salário.
 */

public class Desafio_2 {

    public static void main(String[] args) {
        String continuar;
        int totalHomens = 0, totalMulheres = 0, totalPessoas = 0, totalPessoasSalario = 0;
        int totalIdadeGeral = 0, totalIdadeFem = 0, totalIdadeMasc = 0;
        double somaSalarioGeral = 0, somaSalarioFeminino = 0, somaSalarioMasculino = 0;
        double maiorSalario = Double.MIN_VALUE, menorSalario = Double.MAX_VALUE;

        do {
            int idade = solicitaIdade();
            totalPessoas++;
            totalIdadeGeral += idade;

            char genero = solicitaGenero();

            if (genero == 'f') {
                totalMulheres++;
                totalIdadeFem += idade;
            } else {
                totalHomens++;
                totalIdadeMasc += idade;
            }

            if (idade >= 18) {
                double salario = solicitaSalario();
                totalPessoasSalario++;
                somaSalarioGeral += salario;

                if (genero == 'f') {
                    somaSalarioFeminino += salario;
                } else {
                    somaSalarioMasculino += salario;
                }

                if (salario > maiorSalario) {
                    maiorSalario = salario;
                }
                if (salario < menorSalario) {
                    menorSalario = salario;
                }
            }

            continuar = JOptionPane.showInputDialog("Digite (Finalizar) para parar de responder!");

        } while (!continuar.equals("Finalizar"));

        exibirResultados(totalPessoas, totalIdadeGeral, totalMulheres, totalIdadeFem, totalHomens, totalIdadeMasc, totalPessoasSalario, somaSalarioGeral, somaSalarioFeminino, somaSalarioMasculino, maiorSalario, menorSalario);
    }

    public static void exibirResultados(int totalPessoas, int totalIdadeGeral, int totalMulheres, int totalIdadeFem, int totalHomens, int totalIdadeMasc, int totalPessoasSalario, double somaSalarioGeral, double somaSalarioFeminino, double somaSalarioMasculino, double maiorSalario, double menorSalario) {
        double mediaIdadeGeral = totalIdadeGeral / (double) totalPessoas;
        double mediaIdadeFem = totalMulheres > 0 ? totalIdadeFem / (double) totalMulheres : 0;
        double mediaIdadeMasc = totalHomens > 0 ? totalIdadeMasc / (double) totalHomens : 0;
        double mediaSalarioGeral = somaSalarioGeral / totalPessoasSalario;
        double mediaSalarioFem = totalMulheres > 0 ? somaSalarioFeminino / totalMulheres : 0;
        double mediaSalarioMasc = totalHomens > 0 ? somaSalarioMasculino / totalHomens : 0;

        JOptionPane.showMessageDialog(null,
                "Resultados:\n" +
                        "Média de idade geral: " + mediaIdadeGeral + "\n" +
                        "Média de idade feminino: " + mediaIdadeFem + "\n" +
                        "Média de idade masculino: " + mediaIdadeMasc + "\n" +
                        "Média salarial geral: " + mediaSalarioGeral + "\n" +
                        "Média salarial feminino: " + mediaSalarioFem + "\n" +
                        "Média salarial masculino: " + mediaSalarioMasc + "\n" +
                        "Maior salário: " + maiorSalario + "\n" +
                        "Menor salário: " + menorSalario);
    }

    public static int solicitaIdade() {
        String lidade;
        int idade = 0;
        boolean verifica = false;

        while (!verifica) {
            lidade = JOptionPane.showInputDialog("Informe sua idade:");
            if (isNumeric(lidade)) {
                idade = Integer.parseInt(lidade);
                verifica = true;
            } else {
                JOptionPane.showMessageDialog(null, "Informe sua idade corretamente!");
            }
        }

        return idade;
    }

    public static boolean isNumeric(String str) {
        if (str == null || str.isEmpty()) {
            return false;
        }
        for (char c : str.toCharArray()) {
            if (!Character.isDigit(c)) {
                return false;
            }
        }
        return true;
    }

    public static char solicitaGenero() {
        String cGenero;
        char genero = 0;
        boolean verifica = false;

        while (!verifica) {
            cGenero = JOptionPane.showInputDialog("Informe seu Gênero: (F / M)");
            cGenero = cGenero.toLowerCase();

            if (cGenero.equals("f") || cGenero.equals("m")) {
                genero = cGenero.charAt(0);
                verifica = true;
            } else {
                JOptionPane.showMessageDialog(null, "Informe os dados corretamente!");
            }
        }

        return genero;
    }

    public static double solicitaSalario() {
        String cSalario;
        double salario = 0;
        boolean verifica = false;

        while (!verifica) {
            cSalario = JOptionPane.showInputDialog("Informe seu sálario:");
            try {
                salario = Double.parseDouble(cSalario);
                verifica = true;
            } catch (NumberFormatException e) {
                JOptionPane.showMessageDialog(null, "Informe o sálario corretamente!");
            }
        }

        return salario;
    }
}
